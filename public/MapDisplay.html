<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
    <link rel="stylesheet" href="stylesheets/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
    <script src="javascripts/leaflet-routing-machine.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <style>
        .map {
            position: absolute;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    
    <div id="map" class="map"></div>
    <script>
        // HTML para testes de Leaflet
        navigator.geolocation.getCurrentPosition(getPosition)
        var myLat;
        var myLon;
        function getPosition(position) {
            L.marker(position.coords.latitude, position.coords.longitude)
            myLat = position.coords.latitude;
            myLon = position.coords.longitude
        }

        $(document).ready(function () {
            var map = L.map('map').setView([myLat, myLon], 12);
            var piroca = $.get("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=-34.44076&lon=-58.70521")
            L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            L.Control.geocoder().addTo(map);

            function createButton(label, container) {
                var btn = L.DomUtil.create('button', '', container);
                btn.setAttribute('type', 'button');
                btn.innerHTML = label;
                return btn;
            }
            var waypoints = [L.latLng(myLat, myLon)];

            map.on('click', function (e) {
                L.marker([e.latlng.lat,e.latlng.lng]).addTo(map);
                console.log(piroca)
                
            });
        });
    </script>
</body>

</html>